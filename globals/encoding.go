package globals

import "strings"

func PDFEncode(str string) []byte {
	buf := make([]byte, 0, len(str))
	for _, c := range str {
		buf = append(buf, pdfEncoding[c])
	}
	return buf
}

func WinAnsiEncode(str string) []byte {
	buf := make([]byte, 0, len(str))
	for _, c := range str {
		buf = append(buf, winAnsiEncoding[c])
	}
	return buf
}

var pdfEncoding = map[rune]byte{'A': 0101, 'Æ': 0306, 'Á': 0301, 'Â': 0302, 'Ä': 0304, 'À': 0300, 'Å': 0305, 'Ã': 0303, 'B': 0102, 'C': 0103, 'Ç': 0307, 'D': 0104, 'E': 0105, 'É': 0311, 'Ê': 0312, 'Ë': 0313, 'È': 0310, 'Ð': 0320, '€': 0222, 'F': 0106, 'G': 0107, 'H': 0110, 'I': 0111, 'Í': 0315, 'Î': 0316, 'Ï': 0317, 'Ì': 0314, 'J': 0112, 'K': 0113, 'L': 0114, 'Ł': 0225, 'M': 0115, 'N': 0116, 'Ñ': 0321, 'O': 0117, 'Œ': 0226, 'Ó': 0323, 'Ô': 0324, 'Ö': 0326, 'Ò': 0322, 'Ø': 0330, 'Õ': 0325, 'P': 0120, 'Q': 0121, 'R': 0122, 'S': 0123, 'Š': 0227, 'T': 0124, 'Þ': 0336, 'U': 0125, 'Ú': 0332, 'Û': 0333, 'Ü': 0334, 'Ù': 0331, 'V': 0126, 'W': 0127, 'X': 0130, 'Y': 0131, 'Ý': 0335, 'Ÿ': 0230, 'Z': 0132, 'Ž': 0231, 'a': 0141, 'á': 0341, 'â': 0342, '´': 0264, 'ä': 0344, 'æ': 0346, 'à': 0340, '&': 0046, 'å': 0345, '^': 0136, '~': 0176, '*': 0052, '@': 0100, 'ã': 0343, 'b': 0142, '\\': 0134, '|': 0174, '{': 0173, '}': 0175, '[': 0133, ']': 0135, '˘': 0030, '¦': 0246, '•': 0200, 'c': 0143, 'ˇ': 0031, 'ç': 0347, '¸': 0270, '¢': 0242, 'ˆ': 0032, ':': 0072, ',': 0054, '©': 0251, '¤': 0244, 'd': 0144, '†': 0201, '‡': 0202, '°': 0260, '¨': 0250, '÷': 0367, '$': 0044, '˙': 0033, 'ı': 0232, 'e': 0145, 'é': 0351, 'ê': 0352, 'ë': 0353, 'è': 0350, '8': 0070, '…': 0203, '—': 0204, '–': 0205, '=': 0075, 'ð': 0360, '!': 0041, '¡': 0241, 'f': 0146, '5': 0065, 'ƒ': 0206, '4': 0064, '⁄': 0207, 'g': 0147, 'ß': 0337, '`': 0140, '>': 0076, '«': 0253, '»': 0273, '‹': 0210, '›': 0211, 'h': 0150, '˝': 0034, '-': 0055, 'i': 0151, 'í': 0355, 'î': 0356, 'ï': 0357, 'ì': 0354, 'j': 0152, 'k': 0153, 'l': 0154, '<': 0074, '¬': 0254, 'ł': 0233, 'm': 0155, '¯': 0257, '−': 0212, 'μ': 0265, '×': 0327, 'n': 0156, '9': 0071, 'ñ': 0361, '#': 0043, 'o': 0157, 'ó': 0363, 'ô': 0364, 'ö': 0366, 'œ': 0234, '˛': 0035, 'ò': 0362, '1': 0061, '½': 0275, '¼': 0274, '¹': 0271, 'ª': 0252, 'º': 0272, 'ø': 0370, 'õ': 0365, 'p': 0160, '¶': 0266, '(': 0050, ')': 0051, '%': 0045, '.': 0056, '·': 0267, '‰': 0213, '+': 0053, '±': 0261, 'q': 0161, '?': 0077, '¿': 0277, '"': 0042, '„': 0214, '“': 0215, '”': 0216, '‘': 0217, '’': 0220, '‚': 0221, '\'': 0047, 'r': 0162, '®': 0256, '˚': 0036, 's': 0163, 'š': 0235, '§': 0247, ';': 0073, '7': 0067, '6': 0066, '/': 0057, ' ': 0040, '£': 0243, 't': 0164, 'þ': 0376, '3': 0063, '¾': 0276, '³': 0263, '˜': 0037, '™': 0222, '2': 0062, '²': 0262, 'u': 0165, 'ú': 0372, 'û': 0373, 'ü': 0374, 'ù': 0371, '_': 0137, 'v': 0166, 'w': 0167, 'x': 0170, 'y': 0171, 'ý': 0375, 'ÿ': 0377, '¥': 0245, 'z': 0172, 'ž': 0236, '0': 0060}

var winAnsiEncoding = map[rune]byte{'A': 0101, 'Æ': 0306, 'Á': 0301, 'Â': 0302, 'Ä': 0304, 'À': 0300, 'Å': 0305, 'Ã': 0303, 'B': 0102, 'C': 0103, 'Ç': 0307, 'D': 0104, 'E': 0105, 'É': 0311, 'Ê': 0312, 'Ë': 0313, 'È': 0310, 'Ð': 0320, '€': 0200, 'F': 0106, 'G': 0107, 'H': 0110, 'I': 0111, 'Í': 0315, 'Î': 0316, 'Ï': 0317, 'Ì': 0314, 'J': 0112, 'K': 0113, 'L': 0114, 'M': 0115, 'N': 0116, 'Ñ': 0321, 'O': 0117, 'Œ': 0214, 'Ó': 0323, 'Ô': 0324, 'Ö': 0326, 'Ò': 0322, 'Ø': 0330, 'Õ': 0325, 'P': 0120, 'Q': 0121, 'R': 0122, 'S': 0123, 'Š': 0212, 'T': 0124, 'Þ': 0336, 'U': 0125, 'Ú': 0332, 'Û': 0333, 'Ü': 0334, 'Ù': 0331, 'V': 0126, 'W': 0127, 'X': 0130, 'Y': 0131, 'Ý': 0335, 'Ÿ': 0237, 'Z': 0132, 'Ž': 0216, 'a': 0141, 'á': 0341, 'â': 0342, '´': 0264, 'ä': 0344, 'æ': 0346, 'à': 0340, '&': 0046, 'å': 0345, '^': 0136, '~': 0176, '*': 0052, '@': 0100, 'ã': 0343, 'b': 0142, '\\': 0134, '|': 0174, '{': 0173, '}': 0175, '[': 0133, ']': 0135, '¦': 0246, '•': 0225, 'c': 0143, 'ç': 0347, '¸': 0270, '¢': 0242, 'ˆ': 0210, ':': 0072, ',': 0054, '©': 0251, '¤': 0244, 'd': 0144, '†': 0206, '‡': 0207, '°': 0260, '¨': 0250, '÷': 0367, '$': 0044, 'e': 0145, 'é': 0351, 'ê': 0352, 'ë': 0353, 'è': 0350, '8': 0070, '…': 0205, '—': 0227, '–': 0226, '=': 0075, 'ð': 0360, '!': 0041, '¡': 0241, 'f': 0146, '5': 0065, 'ƒ': 0203, '4': 0064, 'g': 0147, 'ß': 0337, '`': 0140, '>': 0076, '«': 0253, '»': 0273, '‹': 0213, '›': 0233, 'h': 0150, '-': 0055, 'i': 0151, 'í': 0355, 'î': 0356, 'ï': 0357, 'ì': 0354, 'j': 0152, 'k': 0153, 'l': 0154, '<': 0074, '¬': 0254, 'm': 0155, '¯': 0257, 'μ': 0265, '×': 0327, 'n': 0156, '9': 0071, 'ñ': 0361, '#': 0043, 'o': 0157, 'ó': 0363, 'ô': 0364, 'ö': 0366, 'œ': 0234, 'ò': 0362, '1': 0061, '½': 0275, '¼': 0274, '¹': 0271, 'ª': 0252, 'º': 0272, 'ø': 0370, 'õ': 0365, 'p': 0160, '¶': 0266, '(': 0050, ')': 0051, '%': 0045, '.': 0056, '·': 0267, '‰': 0211, '+': 0053, '±': 0261, 'q': 0161, '?': 0077, '¿': 0277, '"': 0042, '„': 0204, '“': 0223, '”': 0224, '‘': 0221, '’': 0222, '‚': 0202, '\'': 0047, 'r': 0162, '®': 0256, 's': 0163, 'š': 0232, '§': 0247, ';': 0073, '7': 0067, '6': 0066, '/': 0057, ' ': 0040, '£': 0243, 't': 0164, 'þ': 0376, '3': 0063, '¾': 0276, '³': 0263, '˜': 0230, '™': 0231, '2': 0062, '²': 0262, 'u': 0165, 'ú': 0372, 'û': 0373, 'ü': 0374, 'ù': 0371, '_': 0137, 'v': 0166, 'w': 0167, 'x': 0170, 'y': 0171, 'ý': 0375, 'ÿ': 0377, '¥': 0245, 'z': 0172, 'ž': 0236, '0': 0060}

func NameEncode(name string) string {
	replaceSet := []byte{'#', '<', '>', '$', '+', '%', '!', '`', '&', '*', '\'', '|', '{', '}', '?', '"', '=', '\\', '/', ':', '@', ' '}
	outBytes := []byte(strings.ToLower(name))
	for i, v := range outBytes {
		for _, r := range replaceSet {
			if v == r {
				outBytes[i] = '_'
			}
		}
	}
	return string(outBytes)
}
